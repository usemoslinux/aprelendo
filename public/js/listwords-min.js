$(document).ready((function(){var o="",e=$("#dicFrame"),t=$();function n(){0===$("input[type=checkbox]:checked").length?$("#actions-menu").addClass("disabled"):$("#actions-menu").removeClass("disabled")}function a(){var o=window.location.search.substr(1).split("&"),e={p:"1"};if(""!=o)for(var t=0;t<o.length;t++){var n=o[t].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}function r(o){let e="?";for(const t in o)o[t]&&(e+=t+"="+encodeURIComponent(o[t])+"&");return e.slice(0,-1)}$("#search").focus(),$("input:checkbox").prop("checked",!1),$.ajax({url:"/ajax/getdicuris.php",type:"GET",dataType:"json"}).done((function(e){null==e.error_msg&&(o=e.dictionary_uri)})),$("#mDelete").on("click",(function(){if(confirm("Really delete?")){var o=[];$("input.chkbox-selrow:checked").each((function(){o.push($(this).attr("data-idWord"))})),$.ajax({url:"ajax/removeword.php",type:"POST",data:{wordIDs:JSON.stringify(o)}}).done((function(){window.location.replace("words.php"+r(a()))})).fail((function(o,e,t){alert("There was an error when trying to delete the selected words. Refresh the page and try again.")}))}})),$(document).on("change",".chkbox-selrow",n),$(document).on("click","#chkbox-selall",(function(o){o.stopPropagation(),$(".chkbox-selrow").prop("checked",$(this).prop("checked")),n()})),$("#dropdown-menu-sort").on("click",(function(o){var e=r({s:$("#s").val(),o:$("#o").val()});window.location.replace("words.php"+e)})),$(".word").on("click",(function(n){t=$(this);var a=o.replace("%s",encodeURI(t.text()));$("#btnadd").text("Forgot"),$("#btn-translate").hide(),$("#btnremove").removeClass().addClass("btn btn-danger mr-auto"),$("#iframe-loader").attr("class","lds-ellipsis m-auto"),e.attr("class","d-none"),e.get(0).contentWindow.location.replace(a),$("#myModal").modal("show")})),$("#myModal").on("show.bs.modal",(function(o){window.location.hash="dictionary"})),$(window).on("hashchange",(function(o){"#dictionary"!=window.location.hash&&$("#myModal").modal("hide")})),$("#myModal").on("hide.bs.modal",(function(o){history.pushState("",document.title,window.location.pathname+window.location.search)})),e.on("load",(function(){$("#iframe-loader").attr("class","d-none"),e.removeClass()})),$("#btnadd").on("click",(function(o){$.ajax({type:"POST",url:"/ajax/addword.php",data:{word:t.text()}}).done((function(o){if(null!=o.error_msg)alert(o.error_msg);else{var e=t.parent().next().children(":first");e.removeClass().addClass("fas fa-hourglass-start status_forgotten"),e.attr("title","Forgotten")}})).fail((function(){alert("Oops! There was an error updating this words' status.")}))})),$("#btnremove").on("click",(function(o){t.parent().prev().children(":first").children(":first").data("idword");$.ajax({url:"ajax/removeword.php",type:"POST",data:{word:t.text()}}).done((function(){window.location.replace("words.php"+r(a()))})).fail((function(o,e,t){alert("There was an error when trying to delete the selected words. Refresh the page and try again.")}))}))}));