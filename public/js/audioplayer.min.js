const audio=document.getElementById("audioplayer"),audio_source=document.getElementById("audio-source"),playPauseButton=document.getElementById("ap-play-btn"),progressBar=document.getElementById("ap-progress-bar"),timeStamp=document.getElementById("ap-time-stamp"),btnAbloop=document.getElementById("ap-abloop-btn");let abloop_start=0,abloop_end=0;if(audio){function togglePlayPause(){const e=document.getElementById("ap-play-btn-icon");audio.paused||audio.ended?(e.className="bi bi-pause-fill",audio.play()):(e.className="bi bi-play-fill",audio.pause())}function playAudioFromBeginning(){audio.currentTime=0,togglePlayPause()}function playbackProgressUpdate(){let e=audio.currentTime/audio.duration*100;progressBar.style.width=`${e}%`;let t=Math.floor(audio.currentTime/3600),a=Math.floor(audio.currentTime%3600/60),o=Math.floor(audio.currentTime%60),n=Math.floor(audio.duration/3600),d=Math.floor(audio.duration%3600/60),i=Math.floor(audio.duration%60),u=t>0?`${t}:`:"";u+=`${a<10?"0":""}${a}:${o<10?"0":""}${o}`;let l=n>0?`${n}:`:"";l+=`${d<10?"0":""}${d}:${i<10?"0":""}${i}`,timeStamp.textContent=`${u} / ${l}`}function changeSpeed(e,t){e.preventDefault(),audio.playbackRate=t,document.querySelectorAll("#ap-speed-menu + .dropdown-menu .dropdown-item").forEach((e=>{parseFloat(e.textContent)===t?e.classList.add("active"):e.classList.remove("active")}))}playPauseButton.addEventListener("click",togglePlayPause),audio.addEventListener("loadedmetadata",playbackProgressUpdate),audio.addEventListener("timeupdate",(function(){abloop_end>0&&audio.currentTime>=abloop_end&&(audio.currentTime=abloop_start),playbackProgressUpdate()})),audio_source.addEventListener("error",(function(e){playPauseButton.removeEventListener("click",togglePlayPause),playPauseButton.classList="btn btn-danger"}))}btnAbloop&&btnAbloop.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),0===abloop_start&&0===abloop_end?(abloop_start=audio.currentTime,this.textContent="B"):abloop_start>0&&0===abloop_end?(abloop_end=audio.currentTime,this.textContent="C"):(abloop_start=abloop_end=0,this.textContent="A")}));