$(document).ready((function(){function e(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(e,t,a){t='<p class="alert '+a+'">'+t+"</p>",e.siblings().remove().end().after(t).next().show().fadeOut(3e3)}$.ajax({type:"GET",url:"ajax/fetchrssfeeds.php"}).done((function(e){$(".lds-ellipsis").fadeOut((function(){null!=e.error_msg?showMessage(e.error_msg,"alert-danger"):$(this).after(e)}))})).fail((function(e,t,a){$(".lds-ellipsis").fadeOut((function(){showMessage("There was an error trying to retrieve your RSS feeds. Please try again later.","alert-danger")}))})),$(document).on("click",".btn-readlater, .btn-readnow, .btn-edit",(function(a){a.preventDefault(),a.stopPropagation();const r=$(this).data("type");!function(a,r,n){const d=$.trim(a.text()),i=a.attr("data-author"),s=a.attr("data-src"),o=a.attr("data-pubdate"),l=r[0].innerText;if("edit"==n){const t=$('<form id="form_add_audio" action="../addtext" method="post"></form>').append('<input type="hidden" name="text_title" value="'+d+'">').append('<input type="hidden" name="text_author" value="'+e(i)+'">').append('<input type="hidden" name="text_url" value="'+e(s)+'">').append('<input type="hidden" name="art_pubdate" value="'+e(o)+'">').append('<input type="hidden" name="text_content" value="'+e(l)+'">').append('<input type="hidden" name="text_is_shared" value="true">');$("body").append(t),t.submit()}else $.ajax({type:"POST",url:"ajax/addtext.php",dataType:"JSON",data:{title:d,author:i,url:s,pubdate:o,text:l,mode:"rss"}}).done((function(e){if(null!=e.error_msg)t(r,e.error_msg,"alert-danger");else switch(n){case"readlater":t(r,"Text was successfully added to the shared texts library","alert-success");break;case"readnow":location.replace("../showtext?id="+e.insert_id+"&sh=1");break;default:break}})).fail((function(){t(r,"There was an error trying to add this text to your library!","alert-danger")}))}($(this).closest(".accordion-item").find(".entry-info"),$(this).parent().siblings(".entry-text"),r)}))}));