$(document).ready((function(){function e(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(t,n,r){const i=$.trim(t.text()),s=t.attr("data-author"),d=t.attr("data-src"),o=t.attr("data-pubdate"),l=n[0].innerText;if("edit"==r){const t=$('<form id="form_add_audio" action="../addtext" method="post"></form>').append('<input type="hidden" name="art_title" value="'+i+'">').append('<input type="hidden" name="art_author" value="'+e(s)+'">').append('<input type="hidden" name="art_url" value="'+e(d)+'">').append('<input type="hidden" name="art_pubdate" value="'+e(o)+'">').append('<input type="hidden" name="art_content" value="'+e(l)+'">').append('<input type="hidden" name="art_is_shared" value="true">');$("body").append(t),t.submit()}else $.ajax({type:"POST",url:"ajax/addtext.php",dataType:"JSON",data:{title:i,author:s,url:d,pubdate:o,text:l,mode:"rss"}}).done((function(e){if(null!=e.error_msg)a(n,e.error_msg,"alert-danger");else switch(r){case"readlater":a(n,"Text was successfully added to the shared texts library","alert-success");break;case"readnow":location.replace("../showtext?id="+e.insert_id+"&sh=1");break;default:break}})).fail((function(){a(n,"There was an error trying to add this text to your library!","alert-danger")}))}function a(e,t,a){t='<p class="alert '+a+'">'+t+"</p>",e.siblings().remove().end().after(t).next().show().fadeOut(3e3)}$.ajax({type:"GET",url:"ajax/fetchrssfeeds.php"}).done((function(e){$(".lds-ellipsis").fadeOut((function(){$(this).after(e)}))})).fail((function(e,t,a){$(".lds-ellipsis").fadeOut((function(){$(this).after('<div class="alert alert-danger">Oops! There was an error trying to retrieve your RSS feeds. Please try again later.</div>')}))})),$(document).on("click",".btn-link",(function(){let e,t=$(".fas",this);t.toggleClass("fa-chevron-right").toggleClass("fa-chevron-down"),e=$(this).parents(".card-body").length>0?$(this).closest(".card-body"):$(".subaccordion > .card > .card-header    "),$(".fas",e).each((function(){$(this).hasClass("fa-chevron-down")&&$(this)[0]!==t[0]&&$(this).toggleClass("fa-chevron-right").toggleClass("fa-chevron-down")}))})),$(document).on("click",".btn-readlater",(function(e){e.preventDefault(),e.stopPropagation(),t($(this).closest(".card").find(" .entry-info"),$(this).parent().siblings(".entry-text"),"readlater")})),$(document).on("click",".btn-readnow",(function(e){e.preventDefault(),e.stopPropagation(),t($(this).closest(".card").find(" .entry-info"),$(this).parent().siblings(".entry-text"),"readnow")})),$(document).on("click",".btn-edit",(function(e){e.preventDefault(),e.stopPropagation(),t($(this).closest(".card").find(" .entry-info"),$(this).parent().siblings(".entry-text"),"edit")}))}));