$(document).ready((function(){function e(){0===$("input[type=checkbox]:checked").length?$("#actions-menu").addClass("disabled"):$("#actions-menu").removeClass("disabled")}function t(){var e=window.location.search.substr(1).split("&"),t={p:"1"};if(""!=e)for(var a=0;a<e.length;a++){var n=e[a].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}function a(e){let t="?";for(const a in e)e[a]&&(t+=a+"="+encodeURIComponent(e[a])+"&");return t.slice(0,-1)}$("#search").focus(),$("input:checkbox").prop("checked",!1),$("#modal-achievements").length&&$("#modal-achievements").modal("show"),$("#mDelete").on("click",(function(){if(confirm("Really delete?")){var e=[];$("input.chkbox-selrow:checked").each((function(){e.push($(this).attr("data-idText"))}));var n=t(),o="1"==n.sa,i=n.p?n.p:"1";$.ajax({url:"ajax/removetext.php",type:"POST",data:{textIDs:JSON.stringify(e),is_archived:o?1:0}}).done((function(){var e=a({p:i,ft:$("#ft").val(),fl:$("#fl").val(),s:$("#s").val(),sa:$("#sa").val(),o:$("#o").val()});window.location.replace("texts.php"+e)})).fail((function(){alert("There was an error when trying to delete the selected texts. Refresh the page and try again.")}))}})),$("#mArchive").on("click",(function(){var e="Archive"===$(this).text(),n=[];$("input.chkbox-selrow:checked").each((function(){n.push($(this).attr("data-idText"))}));var o=t(),i=o.p?o.p:"1";$.ajax({url:"ajax/archivetext.php",type:"POST",data:{textIDs:JSON.stringify(n),archivetext:e}}).done((function(){var e=a({p:i,ft:$("#ft").val(),fl:$("#fl").val(),s:$("#s").val(),sa:$("#sa").val(),o:$("#o").val()});window.location.replace("texts.php"+e)})).fail((function(){alert("There was an error when trying to archive the selected texts. Refresh the page and try again.")}))})),$(document).on("change",".chkbox-selrow",e),$(document).on("click","#chkbox-selall",(function(t){t.stopPropagation(),$(".chkbox-selrow").prop("checked",$(this).prop("checked")),e()})),$("#btn-filter + div > a").on("click",(function(){var e=$(this);if(e.is(".sa"))e.toggleClass("active");else{e.addClass("active");var t="";e.is(".ft")?t=".ft":e.is(".fl")&&(t=".fl"),e.siblings(".active"+t).each((function(){$(this).toggleClass("active")}))}})),$("#dropdown-menu-sort").on("click",(function(e){var t=function(){var e=window.location.pathname,t="";t=e.indexOf("&")>-1?e.substring(e.lastIndexOf("/")+1,e.indexOf("&")):e.substring(e.lastIndexOf("/")+1);return t}(),n=a({ft:$("#ft").val(),fl:$("#fl").val(),s:$("#s").val(),sa:$("#sa").val(),o:$("#o").val()});window.location.replace(t+n)})),$(document).on("click","li.disabled",(function(){return!1})),$(".close").on("click",(function(e){e.preventDefault(),setCookie("hide_welcome_msg",!0,3650)}))}));