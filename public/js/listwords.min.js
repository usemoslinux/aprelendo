$(document).ready((function(){let e="";const o=$("#dicFrame");let t=$();function n(){0===$("input[type=checkbox]:checked").length?$("#actions-menu").addClass("disabled"):$("#actions-menu").removeClass("disabled")}function a(){const e=window.location.search.slice(1).split("&");let o={p:"1"};if(""!=e)for(const t of e){const e=t.split("=");o[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return o}function r(e){let o="?";for(const t in e)e[t]&&(o+=t+"="+encodeURIComponent(e[t])+"&");return o.slice(0,-1)}$("#search").focus(),$("input:checkbox").prop("checked",!1),$.ajax({url:"/ajax/getdicuris.php",type:"GET",dataType:"json"}).done((function(o){null==o.error_msg&&(e=o.dictionary_uri)})),$("#mDelete").on("click",(function(){if(confirm("Really delete?")){let e=[];$("input.chkbox-selrow:checked").each((function(){e.push($(this).attr("data-idWord"))})),$.ajax({url:"ajax/removeword.php",type:"POST",data:{wordIDs:JSON.stringify(e)}}).done((function(){window.location.replace("words"+r(a()))})).fail((function(e,o,t){alert("There was an error when trying to delete the selected words. Refresh the page and try again.")}))}})),$(document).on("change",".chkbox-selrow",n),$(document).on("click","#chkbox-selall",(function(e){e.stopPropagation();$(".chkbox-selrow").prop("checked",$(this).prop("checked")),n()})),$("#dropdown-menu-sort").on("click",(function(e){const o=r({s:$("#s").val(),o:$("#o").val()});window.location.replace("/words"+o)})),$(".word").on("click",(function(n){t=$(this);const a=e.replace("%s",encodeURI(t.text()));$("#btnadd").text("Forgot"),$("#btn-translate").hide(),$("#btnremove").removeClass().addClass("btn btn-danger me-auto"),$("#loading-spinner").attr("class","lds-ellipsis m-auto"),o.attr("class","d-none"),o.get(0).contentWindow.location.replace(a),$("#dic-modal").modal("show")})),o.on("load",(function(){$("#loading-spinner").attr("class","d-none"),o.removeClass()})),$("#btnadd").on("click",(function(e){$.ajax({type:"POST",url:"/ajax/addword.php",data:{word:t.text()}}).done((function(e){if(null!=e.error_msg)alert(e.error_msg);else{let e=t.parent().next().children(":first");e.removeClass().addClass("bi bi-hourglass-bottom status_forgotten"),e.attr("title","Forgotten")}})).fail((function(){alert("Oops! There was an error updating this words' status.")}))})),$("#btnremove").on("click",(function(e){$.ajax({url:"ajax/removeword.php",type:"POST",data:{word:t.text()}}).done((function(){window.location.replace("words"+r(a()))})).fail((function(e,o,t){alert("There was an error when trying to delete the selected words. Refresh the page and try again.")}))}))}));