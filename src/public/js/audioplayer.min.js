const AudioController=(()=>{const t=document.getElementById("audioplayer"),e=document.getElementById("audio-source"),o=document.getElementById("ap-play-btn"),n=document.getElementById("ap-play-btn-icon"),a=document.getElementById("ap-progress-bar"),r=document.getElementById("ap-progress-bar-container"),i=document.getElementById("ap-time-stamp"),l=document.querySelectorAll("#ap-speed-menu .dropdown-item"),d=document.getElementById("ap-abloop-btn");let s=!1,c=-1,u=-1,p=()=>{},m=()=>{},b=()=>{},g=()=>{},y=()=>{},f=()=>{};if(t){p=()=>t.play(),m=()=>{t.pause(),t.currentTime=0},b=e=>{s=!(t.paused&&!s)&&e,t.pause()},y=()=>{t.paused||t.ended?p():t.pause()},g=()=>{s&&(p(),s=!1)},f=()=>{t.pause(),t.currentTime=0,p()};const v=()=>{let e=t.currentTime/t.duration*100;a.style.width=`${e}%`;let o=Math.floor(t.currentTime/3600),n=Math.floor(t.currentTime%3600/60),r=Math.floor(t.currentTime%60),l=Math.floor(t.duration/3600),d=Math.floor(t.duration%3600/60),s=Math.floor(t.duration%60),c=o>0?`${o}:`:"";c+=`${n<10?"0":""}${n}:${r<10?"0":""}${r}`;let u=l>0?`${l}:`:"";u+=`${d<10?"0":""}${d}:${s<10?"0":""}${s}`,i.textContent=`${c} / ${u}`},E=e=>{t.playbackRate=e,document.querySelectorAll("#ap-speed-menu .dropdown-item").forEach((t=>{parseFloat(t.getAttribute("data-speed"))===e?t.classList.add("active"):t.classList.remove("active")}))};o.addEventListener("click",y),t.addEventListener("loadedmetadata",v),t.addEventListener("timeupdate",(()=>{u>-1&&t.currentTime>=u&&(t.currentTime=c),v()})),r.addEventListener("click",(e=>{const o=r.getBoundingClientRect(),n=(e.clientX-o.left)/o.width;t.currentTime=n*t.duration})),r.addEventListener("mousemove",(e=>{const o=r.getBoundingClientRect(),n=(e.clientX-o.left)/o.width,a=Math.floor(n*t.duration),i=Math.floor(a/3600),l=Math.floor(a%3600/60),d=a%60;r.title=i>0?`${i}:${l.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${l}:${d.toString().padStart(2,"0")}`})),l.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.target;if(e.hasAttribute("data-speed")){const t=parseFloat(e.getAttribute("data-speed"));E(t)}}))})),t.addEventListener("play",(()=>{n.className="bi bi-pause-fill"})),t.addEventListener("pause",(()=>{n.className="bi bi-play-fill"})),t.addEventListener("ended",(()=>{t.currentTime=0,n.className="bi bi-play-fill"})),e.addEventListener("error",(()=>{""!==e.src&&e.src!==window.location.href&&(o.removeEventListener("click",y),o.classList="btn btn-danger")})),d&&d.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),-1===c?(c=t.currentTime,d.textContent="B",setNewTooltip(d,"Loop audio from point A to point B, click to set point B")):c>-1&&-1===u?(u=t.currentTime,d.style.backgroundColor="var(--bs-btn-color)",d.style.color="black",d.textContent="A-B",setNewTooltip(d,"Stop the A-B loop"),d.blur()):(c=u=-1,d.textContent="A",d.style.backgroundColor="var(--bs-btn-bg)",d.style.color="var(--bs-btn-color)",setNewTooltip(d,"Loop audio from point A to point B, click to set point A"),d.blur())}))}return{play:p,stop:m,pause:b,resume:g,togglePlayPause:y,playFromBeginning:f}})();