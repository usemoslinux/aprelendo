const audio_controller=(()=>{const e=document.getElementById("audioplayer"),t=document.getElementById("audio-source"),o=document.getElementById("ap-play-btn"),n=document.getElementById("ap-play-btn-icon"),a=document.getElementById("ap-progress-bar"),r=document.getElementById("ap-progress-bar-container"),i=document.getElementById("ap-time-stamp"),l=document.querySelectorAll("#ap-speed-menu .dropdown-item"),d=document.getElementById("ap-abloop-btn");let s=!1,c=-1,u=-1,p=()=>{},m=()=>{},b=()=>{},g=()=>{},y=()=>{},f=()=>{};if(e){p=()=>e.play(),m=()=>{e.pause(),e.currentTime=0},b=t=>{s=!(e.paused&&!s)&&t,e.pause()},y=()=>{e.paused||e.ended?p():e.pause()},g=()=>{s&&(p(),s=!1)},f=()=>{e.pause(),e.currentTime=0,p()};const v=()=>{let t=e.currentTime/e.duration*100;a.style.width=`${t}%`;let o=Math.floor(e.currentTime/3600),n=Math.floor(e.currentTime%3600/60),r=Math.floor(e.currentTime%60),l=Math.floor(e.duration/3600),d=Math.floor(e.duration%3600/60),s=Math.floor(e.duration%60),c=o>0?`${o}:`:"";c+=`${n<10?"0":""}${n}:${r<10?"0":""}${r}`;let u=l>0?`${l}:`:"";u+=`${d<10?"0":""}${d}:${s<10?"0":""}${s}`,i.textContent=`${c} / ${u}`},E=t=>{e.playbackRate=t,document.querySelectorAll("#ap-speed-menu .dropdown-item").forEach((e=>{parseFloat(e.getAttribute("data-speed"))===t?e.classList.add("active"):e.classList.remove("active")}))};o.addEventListener("click",y),e.addEventListener("loadedmetadata",v),e.addEventListener("timeupdate",(()=>{u>-1&&e.currentTime>=u&&(e.currentTime=c),v()})),r.addEventListener("click",(t=>{const o=r.getBoundingClientRect(),n=(t.clientX-o.left)/o.width;e.currentTime=n*e.duration})),r.addEventListener("mousemove",(t=>{const o=r.getBoundingClientRect(),n=(t.clientX-o.left)/o.width,a=Math.floor(n*e.duration),i=Math.floor(a/60),l=a%60;r.title=`${i}:${l.toString().padStart(2,"0")}`})),l.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target;if(t.hasAttribute("data-speed")){const e=parseFloat(t.getAttribute("data-speed"));E(e)}}))})),e.addEventListener("play",(()=>{n.className="bi bi-pause-fill"})),e.addEventListener("pause",(()=>{n.className="bi bi-play-fill"})),e.addEventListener("ended",(()=>{e.currentTime=0,n.className="bi bi-play-fill"})),t.addEventListener("error",(()=>{""!==t.src&&t.src!==window.location.href&&(o.removeEventListener("click",y),o.classList="btn btn-danger")})),d&&d.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),-1===c?(c=e.currentTime,d.textContent="B",setNewTooltip(d,"Loop audio from point A to point B, click to set point B")):c>-1&&-1===u?(u=e.currentTime,d.style.backgroundColor="var(--bs-btn-color)",d.style.color="black",d.textContent="A-B",setNewTooltip(d,"Stop the A-B loop"),d.blur()):(c=u=-1,d.textContent="A",d.style.backgroundColor="var(--bs-btn-bg)",d.style.color="var(--bs-btn-color)",setNewTooltip(d,"Loop audio from point A to point B, click to set point A"),d.blur())}))}return{play:p,stop:m,pause:b,resume:g,togglePlayPause:y,playFromBeginning:f}})();