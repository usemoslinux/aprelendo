const AudioController=(()=>{const t=document.getElementById("audioplayer"),e=document.getElementById("audio-source"),o=document.getElementById("ap-play-btn"),a=document.getElementById("ap-play-btn-icon"),n=document.getElementById("ap-progress-bar"),r=document.getElementById("ap-progress-bar-container"),l=document.getElementById("ap-elapsedtime-stamp"),i=document.getElementById("ap-hovertime-stamp"),d=document.getElementById("ap-totaltime-stamp"),s=document.querySelectorAll("#ap-speed-menu .dropdown-item"),c=document.getElementById("ap-abloop-btn");let p=!1,u=-1,m=-1,b=()=>{},y=()=>{},g=()=>{},f=()=>{},v=()=>{},E=()=>{};if(t){b=()=>t.play(),y=()=>{t.pause(),t.currentTime=0},g=e=>{p=!(t.paused&&!p)&&e,t.pause()},v=()=>{t.paused||t.ended?b():t.pause()},f=()=>{p&&(b(),p=!1)},E=()=>{t.pause(),t.currentTime=0,b()};const h=()=>{let e=t.currentTime/t.duration*100;n.style.width=`${e}%`;let o=Math.floor(t.currentTime/3600),a=Math.floor(t.currentTime%3600/60),r=Math.floor(t.currentTime%60),i=Math.floor(t.duration/3600),s=Math.floor(t.duration%3600/60),c=Math.floor(t.duration%60),p=o>0?`${o}:`:"";p+=`${a<10?"0":""}${a}:${r<10?"0":""}${r}`;let u=i>0?`${i}:`:"";u+=`${s<10?"0":""}${s}:${c<10?"0":""}${c}`,l.textContent=p,d.textContent=u},B=e=>{t.playbackRate=e,document.querySelectorAll("#ap-speed-menu .dropdown-item").forEach((t=>{parseFloat(t.getAttribute("data-speed"))===e?t.classList.add("active"):t.classList.remove("active")}))};o.addEventListener("click",v),t.addEventListener("loadedmetadata",h),t.addEventListener("timeupdate",(()=>{m>-1&&t.currentTime>=m&&(t.currentTime=u),h()})),r.addEventListener("click",(e=>{const o=r.getBoundingClientRect(),a=(e.clientX-o.left)/o.width;t.currentTime=a*t.duration})),window.matchMedia("(hover: hover)").matches&&(r.addEventListener("mousemove",(e=>{const o=r.getBoundingClientRect(),a=e.clientX-o.left,n=a/o.width,l=Math.max(0,Math.floor(n*t.duration)),d=Math.floor(l/3600),s=Math.floor(l%3600/60),c=l%60;i.textContent=d>0?`${d}:${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`:`${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`,i.style.left=`${a}px`,i.style.display="block"})),r.addEventListener("mouseleave",(t=>{i.style.display="none"}))),s.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.target;if(e.hasAttribute("data-speed")){const t=parseFloat(e.getAttribute("data-speed"));B(t)}}))})),t.addEventListener("play",(()=>{a.className="bi bi-pause-fill"})),t.addEventListener("pause",(()=>{a.className="bi bi-play-fill"})),t.addEventListener("ended",(()=>{t.currentTime=0,a.className="bi bi-play-fill"})),e.addEventListener("error",(()=>{""!==e.src&&e.src!==window.location.href&&(o.classList="btn btn-danger disabled",a.className="bi bi-play-fill",l.textContent="Error loading audio!",d.textContent="")})),t.addEventListener("loadedmetadata",(()=>{a.className="bi bi-play-fill"})),c&&c.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),-1===u?(u=t.currentTime,c.textContent="B",setNewTooltip(c,"Loop audio from point A to point B, click to set point B")):u>-1&&-1===m?(m=t.currentTime,c.style.backgroundColor="var(--bs-btn-color)",c.style.color="black",c.textContent="A-B",setNewTooltip(c,"Stop the A-B loop"),c.blur()):(u=m=-1,c.textContent="A",c.style.backgroundColor="var(--bs-btn-bg)",c.style.color="var(--bs-btn-color)",setNewTooltip(c,"Loop audio from point A to point B, click to set point A"),c.blur())}))}return{play:b,stop:y,pause:g,resume:f,togglePlayPause:v,playFromBeginning:E}})();