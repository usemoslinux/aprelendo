const AudioController=(()=>{const t=document.getElementById("audioplayer"),e=document.getElementById("audio-source"),o=document.getElementById("ap-play-btn"),a=document.getElementById("ap-play-btn-icon"),n=document.getElementById("ap-progress-bar"),r=document.getElementById("ap-progress-bar-container"),l=document.getElementById("ap-elapsedtime-stamp"),i=document.getElementById("ap-totaltime-stamp"),d=document.querySelectorAll("#ap-speed-menu .dropdown-item"),s=document.getElementById("ap-abloop-btn");let c=!1,p=-1,u=-1,m=()=>{},b=()=>{},g=()=>{},y=()=>{},f=()=>{},E=()=>{};if(t){m=()=>t.play(),b=()=>{t.pause(),t.currentTime=0},g=e=>{c=!(t.paused&&!c)&&e,t.pause()},f=()=>{t.paused||t.ended?m():t.pause()},y=()=>{c&&(m(),c=!1)},E=()=>{t.pause(),t.currentTime=0,m()};const v=()=>{let e=t.currentTime/t.duration*100;n.style.width=`${e}%`;let o=Math.floor(t.currentTime/3600),a=Math.floor(t.currentTime%3600/60),r=Math.floor(t.currentTime%60),d=Math.floor(t.duration/3600),s=Math.floor(t.duration%3600/60),c=Math.floor(t.duration%60),p=o>0?`${o}:`:"";p+=`${a<10?"0":""}${a}:${r<10?"0":""}${r}`;let u=d>0?`${d}:`:"";u+=`${s<10?"0":""}${s}:${c<10?"0":""}${c}`,l.textContent=p,i.textContent=u},B=e=>{t.playbackRate=e,document.querySelectorAll("#ap-speed-menu .dropdown-item").forEach((t=>{parseFloat(t.getAttribute("data-speed"))===e?t.classList.add("active"):t.classList.remove("active")}))};o.addEventListener("click",f),t.addEventListener("loadedmetadata",v),t.addEventListener("timeupdate",(()=>{u>-1&&t.currentTime>=u&&(t.currentTime=p),v()})),r.addEventListener("click",(e=>{const o=r.getBoundingClientRect(),a=(e.clientX-o.left)/o.width;t.currentTime=a*t.duration})),r.addEventListener("mousemove",(e=>{const o=r.getBoundingClientRect(),a=(e.clientX-o.left)/o.width,n=Math.floor(a*t.duration),l=Math.floor(n/3600),i=Math.floor(n%3600/60),d=n%60;r.title=l>0?`${l}:${i.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:`${i}:${d.toString().padStart(2,"0")}`})),d.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.target;if(e.hasAttribute("data-speed")){const t=parseFloat(e.getAttribute("data-speed"));B(t)}}))})),t.addEventListener("play",(()=>{a.className="bi bi-pause-fill"})),t.addEventListener("pause",(()=>{a.className="bi bi-play-fill"})),t.addEventListener("ended",(()=>{t.currentTime=0,a.className="bi bi-play-fill"})),e.addEventListener("error",(()=>{""!==e.src&&e.src!==window.location.href&&(o.classList="btn btn-danger disabled",a.className="bi bi-play-fill",l.textContent="Error loading audio!",i.textContent="")})),t.addEventListener("loadedmetadata",(()=>{a.className="bi bi-play-fill"})),s&&s.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),-1===p?(p=t.currentTime,s.textContent="B",setNewTooltip(s,"Loop audio from point A to point B, click to set point B")):p>-1&&-1===u?(u=t.currentTime,s.style.backgroundColor="var(--bs-btn-color)",s.style.color="black",s.textContent="A-B",setNewTooltip(s,"Stop the A-B loop"),s.blur()):(p=u=-1,s.textContent="A",s.style.backgroundColor="var(--bs-btn-bg)",s.style.color="var(--bs-btn-color)",setNewTooltip(s,"Loop audio from point A to point B, click to set point A"),s.blur())}))}return{play:m,stop:b,pause:g,resume:y,togglePlayPause:f,playFromBeginning:E}})();