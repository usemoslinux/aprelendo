!function(){const e=document.getElementById("heatmap");if(!e)return;let t=null,n=null,a=null;function o(){return window.matchMedia("(min-width: 1024px)").matches?12:window.matchMedia("(min-width: 640px)").matches?6:1}function i(a){if(!n)return;t&&t.destroy();const o=n.map((e=>e.count)).filter((e=>null!=e)),i=[0,Math.max(...o)];t=new CalHeatmap,t.paint({itemSelector:e,domain:{type:"month",gutter:8,label:{position:"top"}},subDomain:{type:"day",width:12,height:12,radius:2,gutter:2},range:a,data:{source:n,x:"date",y:"count",groupY:"sum"},date:{start:new Date((new Date).getFullYear(),(new Date).getMonth()-(a-1),1)},scale:{color:{type:"linear",range:["#BFE6FF","#0062E6"],interpolate:"hsl",domain:i}},theme:"light"},[[Tooltip,{enabled:!0,text:function(e,t,n){const a=t??0;return`${n.format("MMMM D, YYYY")}: ${a} review${1===a?"":"s"}`}}],[CalendarLabel,{position:"left",key:"weekday-left",width:20,textAlign:"end",padding:[38,6,0,0],text:()=>["Mon","","Wed","","Fri","",""]}]])}async function r(){try{const t=new URLSearchParams(window.location.search).get("u")??"",r=await fetch(`/ajax/getreviewsperday.php?u=${encodeURIComponent(t)}`,{cache:"no-store"});if(!r.ok)throw new Error(`HTTP error: ${r.status}`);const d=await r.json();if(!d.success)throw e.innerHTML='\n                    <div class="cal-heatmap-error">\n                    <p>No data available for this period.</p>\n                    </div>\n                ',new Error(d.error_msg||"Failed to fetch review data");n=d.payload,a=o(),i(a);let l=null;window.addEventListener("resize",(function(){clearTimeout(l),l=setTimeout((()=>{const e=o();e!==a&&(a=e,i(a))}),150)}))}catch(e){}}e.style.width="100%","loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}();