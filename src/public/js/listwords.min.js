$(document).ready((function(){let e="";const t=$("#dicFrame");let o=$();function n(){0===$("input[type=checkbox]:checked").length?$("#actions-menu").addClass("disabled"):$("#actions-menu").removeClass("disabled")}$("#search").focus(),$("input:checkbox").prop("checked",!1),$("form").submit((function(e){e.preventDefault();const t={s:$("#s").val(),o:$(".o.active").data("value")||0},o=buildQueryString(t);window.location.replace("words"+o)})),$.ajax({url:"/ajax/getdicuris.php",type:"GET",dataType:"json"}).done((function(t){null==t.error_msg&&(e=t.dictionary_uri)})),$("#mDelete").on("click",(function(){if(confirm("Really delete?")){let e=[];$("input.chkbox-selrow:checked").each((function(){e.push($(this).attr("data-idWord"))})),$.ajax({url:"ajax/removeword.php",type:"POST",data:{wordIDs:JSON.stringify(e)}}).done((function(){window.location.replace("words"+buildQueryString(getCurrentURIParameters()))})).fail((function(e,t,o){alert("There was an error when trying to delete the selected words. Refresh the page and try again.")}))}})),$(document).on("change",".chkbox-selrow",n),$(document).on("click","#chkbox-selall",(function(e){e.stopPropagation();$(".chkbox-selrow").prop("checked",$(this).prop("checked")),n()})),$("#dropdown-menu-sort .o").on("click",(function(e){const t=getCurrentFileName(),o={s:$("#s").val(),o:$(this).data("value")||0},n=buildQueryString(o);window.location.replace(t+n)})),$(".word").on("click",(function(n){o=$(this);const a=e.replace("%s",encodeURI(o.text()));$("#btn-add").text("Forgot").removeClass("btn-primary").addClass("btn-danger"),$("#btn-more-dics").hide(),$("#btn-remove").removeClass().addClass("btn btn-lg btn-danger me-auto"),$("#loading-spinner").attr("class","lds-ellipsis m-auto"),t.attr("class","d-none"),t.get(0).contentWindow.location.replace(a),$("#dic-modal").modal("show")})),t.on("load",(function(){$("#loading-spinner").attr("class","d-none"),t.removeClass()})),$("#btn-add").on("click",(function(e){$.ajax({type:"POST",url:"/ajax/addword.php",data:{word:o.text()}}).done((function(e){if(null!=e.error_msg)alert(e.error_msg);else{let e=o.parent().next().children(":first");e.removeClass().addClass("bi bi-hourglass-bottom status_forgotten"),e.attr("title","Forgotten")}})).fail((function(){alert("Oops! There was an error updating this words' status.")}))})),$("#btn-remove").on("click",(function(e){$.ajax({url:"ajax/removeword.php",type:"POST",data:{word:o.text()}}).done((function(){window.location.replace("words"+buildQueryString(getCurrentURIParameters()))})).fail((function(e,t,o){alert("There was an error when trying to delete the selected words. Refresh the page and try again.")}))}))}));