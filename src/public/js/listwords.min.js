$(document).ready((function(){let e="";function o(){0===$("input[type=checkbox]:checked").length?$("#actions-menu").addClass("disabled"):$("#actions-menu").removeClass("disabled")}$("#search").trigger("focus"),$("input:checkbox").prop("checked",!1),$("form").on("submit",(function(e){e.preventDefault();const o={s:$("#s").val().trim(),o:$(".o.active").data("value")||0},t=buildQueryString(o);window.location.replace("words"+t)})),(async()=>{try{const o=await fetch("/ajax/getdicuris.php");if(!o.ok)throw new Error(`HTTP error: ${o.status}`);const t=await o.json();if(!t.success)throw new Error(t.error_msg||"Failed to fetch dictionary URIs");e=t.payload.dictionary_uri}catch(e){alert(`Oops! ${e.message}`)}})(),$("#mDelete").on("click",(async function(){if(confirm("Really delete?")){let e=[];if($("input.chkbox-selrow:checked").each((function(){e.push($(this).attr("data-idWord"))})),0===e.length)return;try{const o=new URLSearchParams;o.append("wordIDs",JSON.stringify(e));const t=await fetch("/ajax/removeword.php",{method:"POST",body:o});if(!t.ok)throw new Error(`HTTP error: ${t.status}`);const r=await t.json();if(!r.success)throw new Error(r.error_msg||"Failed to delete words");window.location.replace("words"+buildQueryString(getCurrentURIParameters()))}catch(e){alert(`Oops! ${e.message}`)}}})),$(document).on("change",".chkbox-selrow",o),$(document).on("click","#chkbox-selall",(function(e){e.stopPropagation();$(".chkbox-selrow").prop("checked",$(this).prop("checked")),o()})),$("#dropdown-menu-sort .o").on("click",(function(e){const o=getCurrentFileName(),t={s:$("#s").val().trim(),o:$(this).data("value")||0},r=buildQueryString(t);window.location.replace(o+r)})),$(".word").on("click",(function(o){const t=$(this),r=LinkBuilder.forWordInDictionary(e,t.text());openInNewTab(r)}))}));