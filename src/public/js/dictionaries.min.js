const Dictionaries=(()=>{let e={dictionary:"",img_dictionary:"",translator:""};return{fetchURIs:()=>{$.ajax({url:"/ajax/getdicuris.php",type:"GET",dataType:"json"}).done((function(t){null==t.error_msg&&(e.dictionary=t.dictionary_uri,e.img_dictionary=t.img_dictionary_uri,e.translator=t.translator_uri)}))},getWordFrequency:e=>100==e?"Medium/low":e<81?"Very high":e<97?"High":void 0,getURIs:()=>e}})(),SentenceExtractor={extractSentence:function(e){const t=/[.!?\u3002\uFF01\uFF1F]/,r=TextProcessor.getAnchorsList(),n=TextProcessor.getAnchorIndex(e);if(n<0||n>=r.length)return"";let o=n;for(;o>0;){const e=$(r[o-1]).text();if(t.test(e))break;o--}let c=n;for(;c<r.length-1;){const e=$(r[c+1]).text();if(t.test(e)){c++;break}c++}let i="";for(let e=o;e<=c;e++)i+=$(r[e]).text();return i.replace(/(\r\n|\n|\r)/g," ").trim()}},LinkBuilder={forWordInDictionary:(e,t)=>{const r=t.replace(/\s+/g," ").trim();return e.replace("%s",encodeURIComponent(r))},forTranslationInText:(e,t)=>{let r=SentenceExtractor.extractSentence(t);return e.replace("%s",encodeURI(r))},forTranslationInVideo:(e,t)=>{let r=SentenceExtractor.extractSentence(t);return e.replace("%s",encodeURIComponent(r))},forTranslationInStudy:(e,t)=>{const r=t.parent("p").text().trim()||t.text();return e.replace("%s",encodeURIComponent(r))}};