const tag=document.createElement("script"),video_element=document.getElementById("videoplayer"),ytId=video_element.dataset.ytid;tag.src="https://www.youtube.com/iframe_api";const first_script_tag=document.getElementsByTagName("script")[0];first_script_tag.parentNode.insertBefore(tag,first_script_tag);let VideoController={};const youtubeApiReady=new Promise((e=>{window.onYouTubeIframeAPIReady=function(){e()}}));function initializeVideoPlayer(e){Promise.all([youtubeApiReady]).then((([])=>{VideoController.instance=new YT.Player("videoplayer",{playerVars:{autoplay:0,start:Math.round(e),loop:0,controls:2,fs:0,showinfo:0,autohide:1,modestbranding:1,playsinline:1},videoId:ytId,events:{onStateChange:onPlayerStateChange}}),VideoController.resume_video=!1,VideoController.timer_id=null,VideoController.start_time=null,VideoController.play=function(){VideoController.instance.playVideo(),VideoController.resume_video=!1},VideoController.pause=function(e){VideoController.isPaused()||(VideoController.instance.pauseVideo(),VideoController.resume_video=e)},VideoController.isPaused=function(){return VideoController.instance.getPlayerState()!==YT.PlayerState.PLAYING},VideoController.resume=function(){VideoController.resume_video&&(VideoController.play(),VideoController.resume_video=!1)},VideoController.getCurrentTime=function(){return VideoController.instance.getCurrentTime()}})).catch((e=>{}))}function onPlayerStateChange(e){const t=Array.from(document.querySelectorAll("#text span"));let o=0;if(0==t.length)return;e.data===YT.PlayerState.PLAYING?VideoController.timer_id=setInterval((()=>{o=VideoController.getCurrentTime();const e=t.filter((e=>parseFloat(e.dataset.start)<o)).slice(-1)[0];e&&!e.classList.contains("video-reading-line")&&(t.forEach((e=>e.classList.remove("video-reading-line"))),e.classList.add("video-reading-line"),e.scrollIntoView({behavior:"auto",block:"center",inline:"center"}))}),500):null!==VideoController.timer_id&&(clearInterval(VideoController.timer_id),VideoController.timer_id=null)}