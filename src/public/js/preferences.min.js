$(document).ready((function(){$("#prefs-form").on("submit",(async function(e){e.preventDefault();try{const e=new URLSearchParams($("#prefs-form").serialize()),r=await fetch("/ajax/savepreferences.php",{method:"POST",body:e});if(!r.ok)throw new Error(`HTTP error: ${r.status}`);const s=await r.json();if(!s.success)throw new Error(s.error_msg||"Failed to save preferences.");showMessage("Your preferences were successfully saved. You will\n                soon be redirected to the main page.","alert-success"),setTimeout((()=>{window.location.replace("/texts")}),2e3)}catch(e){showMessage(e.message,"alert-danger")}}))}));