$(document).ready((function(){let o=[],t=null,e=document.getElementById("import-words-modal"),n=bootstrap.Modal.getOrCreateInstance(e);$("#btn-show-import-modal").on("click",(function(){t=this,n.removeClass('d-none')})),$("#words-upload-input").on("change",(function(t){let e=t.target.files[0],n=new FileReader;n.onload=function(t){let e=t.target.result;o=e.split(/\r?\n|\r/),o=[...new Set(o)],o=o.map((o=>o.trim().toLowerCase())).filter((o=>o)),function(o){let t=document.getElementById("words-table").querySelector("tbody");t.innerHTML="",o.forEach((o=>{t.insertRow().insertCell(0).textContent=o}))}(o)},n.readAsText(e),document.getElementById("words-upload-wrap").classList.toggle("d-none"),document.getElementById("words-table-wrap").classList.toggle("d-none"),document.getElementById("btn-import-words").disabled=!1,document.getElementById("words-upload-input").value=""})),$("#import-words-modal").on("show.bs.modal",(function(o){let e=o.relatedTarget;e&&(t=e)})),$("#import-words-modal").on("hide.bs.modal",(function(){let o=document.activeElement;o&&this.contains(o)&&o.blur()})),$("#btn-cancel-import").on("click",(function(){n.addClass('d-none')})),$("#import-words-modal").on("hidden.bs.modal",(function(){document.getElementById("words-table-wrap").classList.add("d-none"),document.getElementById("words-upload-wrap").classList.remove("d-none"),document.getElementById("words-table").querySelector("tbody").innerHTML="",document.getElementById("btn-import-words").disabled=!0,t&&(t.focus(),t=null)})),$("#btn-import-words").on("click",(async function(){try{const t=new URLSearchParams;o.forEach((o=>t.append("words[]",o)));const e=await fetch("/ajax/addword.php",{method:"POST",body:t});if(!e.ok)throw new Error(`HTTP error: ${e.status}`);window.location.replace("/words")}catch(o){alert(`Oops! ${o.message}`)}})),$("#words-upload-wrap").on("click",(function(o){o.preventDefault(),$("#words-upload-input").trigger("click")})),$("#words-upload-wrap").on("dragover",(function(o){o.preventDefault(),o.stopPropagation(),$(this).addClass("words-dropping")})),$("#words-upload-wrap").on("dragleave",(function(o){o.preventDefault(),o.stopPropagation(),$(this).removeClass("words-dropping")})),$("#words-upload-wrap").on("drop",(function(o){o.preventDefault(),o.stopPropagation(),$(this).removeClass("words-dropping");let t=o.originalEvent.dataTransfer.files;t.length>0&&($("#words-upload-input").prop("files",t),$("#words-upload-input").trigger("change"))}))}));