$(document).ready((function(){const e={formality:["Is [word] considered formal, neutral, or informal? In which settings should it be used?","What are some alternatives to [word] that would sound more formal?","What are some more casual or slang alternatives to [word]?","Are there situations where using [word] might be inappropriate due to formality or tone?","Does the level of formality of [word] change depending on the region, dialect, or culture?"],synonyms:["What are the subtle differences between [word] and its closest synonyms?","In a nutshell, what is the difference between [word] and ... ","What are some synonyms of [word]?","What are some antonyms of [word]?","Are there words that are often confused with [word] but actually mean something different?"],context:["Is [word] more commonly found in spoken or written language? Can you give examples?","In what professional fields or industries is [word] frequently used?","How does the use of [word] differ across countries or dialects? Are there any regional variations?","Does [word] carry cultural connotations that may not translate directly into other languages?","How is [word] commonly pronounced in different regions or accents?","Are there contexts where using [word] could be considered rude or inappropriate?","Are there double meanings or slang uses of [word] in different cultures that learners should be aware of?"],practical:["What are some common collocations with [word]?","Does [word] have any idiomatic uses or expressions?","Can you provide several example sentences that illustrate different meanings or nuances of [word]?"],pop:["Has the meaning of [word] changed or evolved over time? If so, how?","Is [word] currently trending or used in pop culture, social media, or memes?","What are some well-known books, movies, or songs that feature [word]?","How do different generations use [word] differently?"],personalized:["What are the most common mistakes learners from my native language make when using [word]?","Is [word] a 'false friend' with a similar-looking word in my native language?","What are the most common translations to my native language of [word]?","For beginners, what's the easiest way to remember and use [word] correctly?","For advanced learners, what are some nuanced uses of [word] that natives commonly use?","What memory tricks or mnemonics can help learners remember [word]?"]};function o(e,o){return e.replace(/\[word\]/g,`"${o}"`)}$("#ask-ai-bot-modal").on("show.bs.modal",(function(){$("#prompt-category").val(""),$("#prompt-select").attr("disabled",!0).empty().append('<option value="">First select a category...</option>'),$("#custom-prompt").val(""),$("#prompt-form").show(),$("#ai-answer").hide(),$("#text-ai-answer").val(""),$("#back-footer").hide(),$("#normal-footer").show()})),$("#prompt-category").change((function(){const t=$(this).val(),a=$("#prompt-select"),r=$("#ask-ai-bot-modal").attr("data-word");t?(a.removeAttr("disabled").empty().append('<option value="">Choose a prompt...</option>'),e[t].forEach(((e,t)=>{const n=o(e,r);a.append(`<option value="${t}">${n}</option>`)}))):(a.attr("disabled",!0).empty().append('<option value="">First select a category...</option>'),$("#custom-prompt").val(""))})),$("#prompt-select").change((function(){const t=$("#prompt-category").val(),a=$(this).val(),r=$("#ask-ai-bot-modal").attr("data-word");if(""!==a){const n=o(e[t][a],r);$("#custom-prompt").val(n)}else $("#custom-prompt").val("")})),$("#btn-ask-ai-bot").click((async function(){const e=$("#custom-prompt").val();if(e){const t=o(e,$("#ask-ai-bot-modal").attr("data-word"));$("#prompt-form").hide(),$("#ai-answer").show(),$("#normal-footer").hide(),$("#back-footer").show(),$("#text-ai-answer").val("");let a=!0;try{const e=await fetch("/ajax/getaireply.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`prompt=${encodeURIComponent(t)}`});if(!e.ok)throw new Error("Failed to get AI response");const o=e.body.getReader(),r=new TextDecoder;for(;;){const{value:e,done:t}=await o.read();if(t)break;let n=r.decode(e,{stream:!0});a&&(n=n.trimStart(),a=!1),$("#text-ai-answer").val($("#text-ai-answer").val()+n)}}catch(e){$("#text-ai-answer").val("Failed to get response from AI. Please try again.")}}})),$(document).on("click","#back-to-form",(function(){$("#back-footer").hide(),$("#normal-footer").show(),$("#ai-answer").hide(),$("#text-ai-answer").val(""),$("#prompt-form").show()}))}));