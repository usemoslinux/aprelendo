$(document).ready((function(){const e=$(".accordion").find(".accordion-item"),t=e.length;if(0!=t){for(let a=0;a<t;a++){const t=e.eq(a),r="#"+t.attr("id"),n=t.data("feed-index");$.ajax({type:"GET",data:{feed_index:n},url:"ajax/fetchrssfeeds.php"}).done((function(e){if(null!=e.error_msg){let t=$(r),a=n+1;t.find(".rss-placeholder-text").text("Error!"),t.find(".accordion-button").removeClass("rss-placeholder-glow").addClass("text-bg-danger"),t.find("h2").after('<div id="item-'+a+'" class="collapse" data-bs-parent="#accordion"><div class="accordion-body"><div>'+e.error_msg+"</div></div></div>")}else $(r).html(e)})).fail((function(e,t,a){$("#accordion").fadeOut((function(){showMessage("There was an error trying to retrieve your RSS feeds. Please try again later.","alert-danger")}))}))}$(document).on("click",".btn-readlater, .btn-readnow, .btn-edit",(function(e){e.preventDefault(),e.stopPropagation();const t=$(this).data("type");!function(e,t,n){const d=$.trim(e.text()),o=e.attr("data-author"),i=e.attr("data-src"),s=e.attr("data-pubdate"),l=t[0].innerText;if("edit"==n){const e=$('<form id="form_add_audio" action="../addtext" method="post"></form>').append('<input type="hidden" name="text_title" value="'+d+'">').append('<input type="hidden" name="text_author" value="'+a(o)+'">').append('<input type="hidden" name="text_url" value="'+a(i)+'">').append('<input type="hidden" name="art_pubdate" value="'+a(s)+'">').append('<input type="hidden" name="text_content" value="'+a(l)+'">').append('<input type="hidden" name="text_is_shared" value="true">');$("body").append(e),e.submit()}else $.ajax({type:"POST",url:"ajax/addtext.php",dataType:"JSON",data:{title:d,author:o,url:i,pubdate:s,text:l,mode:"rss"}}).done((function(e){if(null!=e.error_msg)r(t,e.error_msg,"alert-danger");else switch(n){case"readlater":r(t,"Text was successfully added to the shared texts library","alert-success");break;case"readnow":location.replace("../showtext?id="+e.insert_id+"&sh=1");break;default:break}})).fail((function(){r(t,"There was an error trying to add this text to your library!","alert-danger")}))}($(this).closest(".accordion-item").find(".entry-info"),$(this).parent().siblings(".entry-text"),t)}))}else $("#accordion").html((function(){return showMessage('<p>No RSS feeds detected yet.</p><p>To begin discovering new content, visit the <a class="alert-link" href="/languages">languages</a> section and add up to three feeds per language.</p><p>If you need further guidance, explore our quick <a href="https://blog.aprelendo.com/2024/12/a-step-by-step-guide-to-adding-rss-texts-to-aprelendo/" target="_blank" rel="noopener noreferrer" class="alert-link">setup guide</a>.</p>',"alert-warning","Get Started")}));function a(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e,t,a){t='<p class="alert '+a+'">'+t+"</p>",e.siblings().remove().end().after(t).next().show().fadeOut(3e3)}}));