const langs_with_no_word_separator=["zh","ja","ko"];function addLinks(a,e,s){let r="",n="";const t=s?"style='display: none;'":"";return r=langs_with_no_word_separator.includes(e)?new RegExp(/(?:\s*<a class='word[^>]+>.*?<\/a>|<[^>]*>)|(\p{L})/giu):new RegExp(/(?:\s*<a class='word[^>]+>.*?<\/a>|<[^>]*>)|(\p{L}+)/giu),n=a.replace(r,(function(a,e){return void 0===e?a:'<a class="word" data-toggle="modal" data-bs-target="#dic-modal" '+t+">"+e+"</a>"})),r=new RegExp(/(?<=<[^>]*>)([^\p{L}<]+)/gu),n=n.replace(r,(function(a,e){return void 0===e?a:"<a>"+e+"</a>"})),n}function underlineWords(a,e,s){let r=a.text,n="",t="",o="",d="",l="",i="";const c=s?"style='display: none;'":"";return Object.values(a.user_words).forEach((a=>{a.is_phrase>0?a.status>0?t+=escapeRegExp(a.word)+"|":o+=escapeRegExp(a.word)+"|":a.status>0?d+=a.word+"|":l+=a.word+"|"})),t&&(t=t.slice(0,-1),n=langs_with_no_word_separator.includes(e)?new RegExp("(?:<[^>]*>)|("+t+")","iug"):new RegExp("(?:<[^>]*>)|(?<![\\p{L}])("+t+")(?![\\p{L}])","iug"),r=r.replace(n,(function(a,e){return void 0===e?a:"<a class='word reviewing learning' data-toggle='modal' data-bs-target='#dic-modal' "+c+">"+e+"</a>"}))),o&&(o=o.slice(0,-1),n=langs_with_no_word_separator.includes(e)?new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|("+o+")","iug"):new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|(?<![\\p{L}])("+o+")(?![\\p{L}])","iug"),r=r.replace(n,(function(a,e){return void 0===e?a:"<a class='word learned' data-toggle='modal' data-bs-target='#dic-modal' "+c+">"+e+"</a>"}))),d&&(d=d.slice(0,-1),n=langs_with_no_word_separator.includes(e)?new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|("+d+")","iug"):new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|(?<![\\p{L}])("+d+")(?![\\p{L}])","iug"),r=r.replace(n,(function(a,e){return void 0===e?a:"<a class='word reviewing learning' data-toggle='modal' data-bs-target='#dic-modal' "+c+">"+e+"</a>"}))),l&&(l=l.slice(0,-1),n=langs_with_no_word_separator.includes(e)?new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|("+l+")","iug"):new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|(?<![\\p{L}])("+l+")(?![\\p{L}])","iug"),r=r.replace(n,(function(a,e){return void 0===e?a:"<a class='word learned' data-toggle='modal' data-bs-target='#dic-modal' "+c+">"+e+"</a>"}))),a.high_freq&&(i=a.high_freq.join("|"),n=langs_with_no_word_separator.includes(e)?new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|("+i+")","iug"):new RegExp("(?:s*<a class='word[^>]+>.*?</a>|<[^>]*>)|(?<![\\p{L}])("+i+")(?![\\p{L}])","iug"),r=r.replace(n,(function(a,e,s,r){return void 0===e?a:"<a class='word frequency-list' data-toggle='modal' data-bs-target='#dic-modal' "+c+">"+e+"</a>"}))),addLinks(r,e,s)}function escapeRegExp(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function getUniqueElements(a){let e=new Set;return $(a).each((function(){let a=$(this).text().toLowerCase().trim();e.add(a)})),e.size}