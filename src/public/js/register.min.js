$(document).ready((function(){const e=[{name:"Arabic",iso:"ar",welcome:"أهلا بك!"},{name:"Bulgarian",iso:"bg",welcome:"Добре дошли!"},{name:"Catalan",iso:"ca",welcome:"Benvingut!"},{name:"Chinese",iso:"zh",welcome:"欢迎！"},{name:"Croatian",iso:"hr",welcome:"Dobrodošli!"},{name:"Czech",iso:"cs",welcome:"Vítejte!"},{name:"Danish",iso:"da",welcome:"Velkommen!"},{name:"Dutch",iso:"nl",welcome:"Welkom!"},{name:"English",iso:"en",welcome:"Welcome!"},{name:"French",iso:"fr",welcome:"Bienvenue!"},{name:"German",iso:"de",welcome:"Willkommen!"},{name:"Greek",iso:"el",welcome:"Καλώς ήρθατε!"},{name:"Hebrew",iso:"he",welcome:"ברוך הבא!"},{name:"Hindi",iso:"hi",welcome:"स्वागत है!"},{name:"Hungarian",iso:"hu",welcome:"Üdvözöljük!"},{name:"Italian",iso:"it",welcome:"Benvenuto!"},{name:"Japanese",iso:"ja",welcome:"ようこそ！"},{name:"Korean",iso:"ko",welcome:"환영합니다!"},{name:"Norwegian",iso:"no",welcome:"Velkommen!"},{name:"Polish",iso:"pl",welcome:"Witaj!"},{name:"Portuguese",iso:"pt",welcome:"Bem-vindo!"},{name:"Romanian",iso:"ro",welcome:"Bun venit!"},{name:"Russian",iso:"ru",welcome:"Добро пожаловать!"},{name:"Slovak",iso:"sk",welcome:"Vitajte!"},{name:"Slovenian",iso:"sl",welcome:"Dobrodošli!"},{name:"Spanish",iso:"es",welcome:"¡Bienvenido!"},{name:"Swedish",iso:"sv",welcome:"Välkommen!"},{name:"Turkish",iso:"tr",welcome:"Hoş geldiniz!"},{name:"Vietnamese",iso:"vi",welcome:"Chào mừng!"}];$("#form-register").on("submit",(async function(e){e.preventDefault();const o=$("#form-register").serializeArray();o.push({name:"time-zone",value:Intl.DateTimeFormat().resolvedOptions().timeZone}),showMessage("We are processing your registration. Please wait a moment while\n            we securely handle your information. This should only take a\n            few seconds.","alert-info"),$("#btn_register").prop("disabled",!0);try{const e=new URLSearchParams;o.forEach((o=>{e.append(o.name,o.value)}));const n=await fetch("/ajax/register.php",{method:"POST",body:e});if(!n.ok)throw new Error(`HTTP error: ${n.status}`);const a=await n.json();if($("#btn_register").prop("disabled",!1),!a.success)throw new Error(a.error_msg||"Registration failed.");if(!0===a.is_self_hosted)showMessage("Registration successful! You will soon be redirected to the login page.","alert-success"),setTimeout((()=>{window.location.replace("/login")}),2e3);else{showMessage("Registration successful! We've sent an activation email to the address you provided.\n                    Please check your inbox to complete the registration process. The email might take a few minutes\n                    to arrive. If you don't find it in your inbox, check your spam or junk folder as it might have\n                    been filtered there. Once you locate the email, click on the activation link to activate your\n                    account and start using our platform.","alert-success")}}catch(e){$("#btn_register").prop("disabled",!1),showMessage(e.message,"alert-danger")}})),$("#learning-lang").on("change",(function(){const o=$(this).prop("selectedIndex"),n=e[o];if(!n)return;const a=`img/flags/${n.iso}.svg`;$("h1").html(`\n            <img id="learning-flag" class="flag-icon" src="${a}" alt="${n.name}">\n            <br>\n            <div class="my-3">${n.welcome}</div>\n        `),$("#welcome-msg").text(`You are only one step away from learning ${n.name}`)}))}));