$(document).ready((function(){$("#btn-report-text").on("click",(async function(){const e=$(this),r=$("#text-container").attr("data-idtext"),t=$('input[name="report-reason"]:checked').val();if(!t)throw showMessage("Please select a reason for reporting.","alert-danger",null,"report-alert-box"),new Error("User forgot to complete reason for reporting");showMessage("Sending... please wait.","alert-info",null,"report-alert-box"),e.prop("disabled",!0);try{const o=new URLSearchParams;o.append("text_id",r),o.append("reason",t);const a=await fetch("/ajax/reporttext.php",{method:"POST",body:o});if(!a.ok)throw new Error(`HTTP error: ${a.status}`);const n=await a.json();if(!n.success)throw new Error(n.error_msg||"Failed to report text.");showMessage("Thank you! Your report has been submitted. Together,\n                we're making our community safer and more enjoyable\n                for everyone.","alert-success",null,"report-alert-box"),setTimeout((function(){$("#report-text-modal").modal("hide"),e.prop("disabled",!1)}),3e3)}catch(e){showMessage(e.message,"alert-danger")}})),$("#report-text-modal").on("hidden.bs.modal",(function(){$("#report-alert-box").hide(timeout)}))}));