$(document).ready((function(){$("#userprofile-form").on("submit",(async function(e){e.preventDefault();try{const e=new URLSearchParams($("#userprofile-form").serialize()),o=await fetch("/ajax/saveuserprofile.php",{method:"POST",body:e});if(!o.ok)throw new Error(`HTTP error: ${o.status}`);const r=await o.json();if(!r.success)throw new Error(r.error_msg||"Failed to save user profile.");showMessage("Your user profile information was successfully saved.\n                You will soon be redirected to the main page.","alert-success"),setTimeout((()=>{window.location.replace("/texts")}),2e3)}catch(e){showMessage(e.message,"alert-danger")}finally{$("#password, #newpassword, #newpassword-confirmation").val("")}})),$("#btn-delete-account").on("click",(function(){$(document).find("#delete-account-modal").modal("show")})),$("#btn-confirm-delete-account").on("click",(async function(){try{const e=new URLSearchParams($("#userprofile-form").serialize()),o=await fetch("/ajax/deleteaccount.php",{method:"POST",body:e});if(!o.ok)throw new Error(`HTTP error: ${o.status}`);const r=await o.json();if(!r.success)throw new Error(r.error_msg||"Failed to delete account.");handleLogout(!0)}catch(e){showMessage(e.message,"alert-danger")}}))}));