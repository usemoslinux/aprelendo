$(document).ready((function(){function t(t){t.toggleClass("bi-heart bi-heart-fill");const a=parseInt(t.siblings("small").text());t.hasClass("bi-heart-fill")?t.siblings("small").text(a+1):t.siblings("small").text(a-1)}$("span.bi-heart, span.bi-heart-fill").on("click",(async function(){const a=$(this),s=a.attr("data-idText");t(a);try{const t=new URLSearchParams;t.append("id",s);const a=await fetch("/ajax/togglelike.php",{method:"POST",body:t});if(!a.ok)throw new Error(`HTTP error: ${a.status}`);const e=await a.json();if(!e.success)throw new Error(e.error_msg||"Failed to toggle like for text")}catch(s){t(a)}}))}));