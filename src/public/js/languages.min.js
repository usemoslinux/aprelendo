$(document).ready((function(){$("#form-editlanguage").on("submit",(async function(e){e.preventDefault();try{const e=new URLSearchParams($(this).serialize()),t=await fetch("/ajax/editlanguage.php",{method:"post",body:e});if(!t.ok)throw new Error(`HTTP error: ${t.status}`);const o=await t.json();if(!o.success)throw new Error(o.error_msg||"Failed to save language information.");showMessage("Your language information was successfully saved. You\n                will soon be redirected to the main page.","alert-success"),setTimeout((()=>{window.location.replace("/texts")}),2e3)}catch(e){showMessage(e.message,"alert-danger")}})),$("#savebtn").on("click",(function(e){const t=$("#dict-uri").val(),o=$("#translator-uri").val();let s=!1;0==t.length?(showMessage("You need to specify the URL of the dictionary you want to use.","alert-danger"),s=!0):-1==t.indexOf("%s")?(showMessage("The dictionary URL needs to include the position of the lookup word or phrase. For this, use '%s' (without quotation marks).","alert-danger"),s=!0):0==o.length?(showMessage("You need to specify the URL of the translator you want to use.","alert-danger"),s=!0):-1==o.indexOf("%s")&&(showMessage("The translator URL needs to include the position of the lookup word or phrase. For this, use '%s' (without quotation marks).","alert-danger"),s=!0),s&&(e.preventDefault(),e.stopPropagation())})),$(".dict-select .dropdown-item").on("click",(function(){let e=$(this).attr("value");$(this).closest(".input-group").find('input[type="url"]').val(e)}))}));