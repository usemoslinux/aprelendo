const ActionBtns=(()=>{const n=n=>{if(!n||0===n.length)return;void 0===n.data("original-html")&&n.data("original-html",n.html());const t='\n            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n            <span class="visually-hidden">Loading...</span>\n        ';n.html(t.trim()),n.prop("disabled",!0)},t=n=>{if(!n||0===n.length)return;const t=n.data("original-html");void 0!==t&&(n.html(t),n.removeData("original-html")),n.prop("disabled",!1)};return{show:n=>{const t=$("#action-buttons"),o=t.outerWidth(),i=$(window).width(),e=n.offset(),a=n.outerWidth();e.left+o>i?t.css({top:e.top-t.outerHeight()-2,left:e.left-o+a}):t.css({top:e.top-t.outerHeight()-2,left:e.left}),t.removeClass("invisible")},hide:n=>{$("#action-buttons").addClass("invisible")},createWordActionBtns:(n,t)=>{let o=$("#word-actions-g1")||$(parent.document).find("#word-actions-g1"),i=$("#word-actions-g2")||$(parent.document).find("#word-actions-g2");if(t)return o.addClass("d-none"),void i.addClass("d-none");const e=n.filter(".learning, .new, .forgotten, .learned").length;n.filter(".word").length==e?(o.addClass("d-none"),i.removeClass("d-none")):(o.removeClass("d-none"),i.addClass("d-none"))},bindDictionaryBtnsOnClick:(n,t)=>{const o=Dictionaries.getURIs(),i=LinkBuilder.forWordInDictionary(o.dictionary,n.text()),e=LinkBuilder.forWordInDictionary(o.img_dictionary,n.text());let a="";switch(t){case"text":a=LinkBuilder.forTranslationInText(o.translator,n);break;case"video":a=LinkBuilder.forTranslationInVideo(o.translator,n);break;case"study":a=LinkBuilder.forTranslationInStudy(o.translator,n);break;default:break}$("#btn-open-dict").off("click").on("click",(function(){openInNewTab(i)})),$("#btn-open-img-dict").off("click").on("click",(function(){openInNewTab(e)})),$("#btn-open-translator").off("click").on("click",(function(){openInNewTab(a)})),$("#btn-open-ai-bot-modal").off("click").on("click",(function(){const t=$("#ask-ai-bot-modal");t.attr("data-word",n.text()),t.modal("show")}))},setLoadingOnButton:n,clearLoadingOnButton:t,setActionMenuLoading:t=>{const o=$("#action-buttons");o.addClass("is-loading"),o.find("button").prop("disabled",!0),n(t)},clearActionMenuLoading:n=>{t(n);const o=$("#action-buttons");o.find("button").prop("disabled",!1),o.removeClass("is-loading")}}})(),TextActionBtns={show:n=>{ActionBtns.createWordActionBtns(n,!1),$("#text-container").disableScroll(),ActionBtns.bindDictionaryBtnsOnClick(n,"text"),ActionBtns.show(n)},hide:()=>{$("#text-container").enableScroll(),ActionBtns.hide()}},VideoActionBtns={show:n=>{$("#text-container").disableScroll(),ActionBtns.createWordActionBtns(n,!1),ActionBtns.bindDictionaryBtnsOnClick(n,"video"),ActionBtns.show(n)},hide:()=>{$("#text-container").enableScroll(),ActionBtns.hide()}},StudyActionBtns={show:n=>{ActionBtns.createWordActionBtns(n,!0),ActionBtns.bindDictionaryBtnsOnClick(n,"study"),ActionBtns.show(n)},hide:()=>{ActionBtns.hide()}};