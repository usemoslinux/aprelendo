$(document).ready((function(){!function(){function t(t){const e=t.raw,n=(e/t.dataset.data.reduce(((t,e)=>t+e),0)*100).toFixed(1);return`${t.label}: ${e} (${n}%)`}$.ajax({type:"GET",url:"ajax/getstats.php",data:{type:"words"},dataType:"json"}).done((function(e){const n=parseInt(e[0]),a=parseInt(e[1]),o=parseInt(e[2]),r=parseInt(e[3]),i=parseInt(e[4]),l=document.getElementById("total-stats-canvas").getContext("2d"),s={id:"noDataPlugin",afterDraw:t=>{if(0===i){const e=t.ctx,{width:n,height:a}=t;e.save(),e.textAlign="center",e.textBaseline="middle",e.font="16px Arial",e.fillStyle="gray",e.fillText("No Data Available",n/2,a/2),e.restore()}}};new Chart(l,{type:"doughnut",data:{labels:["Learned","Learning","New","Forgotten"],datasets:[{data:[n,a,o,r],backgroundColor:["#3cb371","#ffa500","#1e90ff","#E0115F"],hoverOffset:4}]},options:{responsive:!0,plugins:{legend:{display:i,position:"right"},tooltip:{callbacks:{label:t}}}},plugins:[s]}),i&&($("#learned-count").text(n),$("#learned-percentage").text((n/i*100).toFixed(2).toLocaleString("en-US")),$("#learning-count").text(a),$("#learning-percentage").text((a/i*100).toFixed(2).toLocaleString("en-US")),$("#new-count").text(o),$("#new-percentage").text((o/i*100).toFixed(2).toLocaleString("en-US")),$("#forgotten-count").text(r),$("#forgotten-percentage").text((r/i*100).toFixed(2).toLocaleString("en-US")),$("#total-count").text(n+a+o+r))})).fail((function(){$("#total-stats-canvas").replaceWith("<div class='d-flex align-items-center justify-content-center' style='min-height:400px;'><p class='text-danger'>Error: no data to display</p></div>")}))}()}));